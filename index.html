<!DOCTYPE html>
<html lang="en">

<head>
  <script
    src="https://hv-camera-web-sg.s3-ap-southeast-1.amazonaws.com/hyperverge-web-sdk@9.15.2/src/sdk.min.js"></script>
</head>

<body>
  <div style="position: fixed; top: 10%; left: 37%">
    <div style="text-align: center">
      <button type="button" onclick="starOnboarding();">
        Start Onboarding
      </button>
    </div>
    <textarea type="text" id="myTextBox" rows="50" cols="50" style="resize: both; margin-top: 1rem">
      </textarea>
  </div>
</body>
<script>
  const textBox = document.getElementById("myTextBox");

  const getAuthToken = async () => {
    const response = await fetch('https://lbbre-113-190-135-21.a.free.pinggy.link/kyc/generate-kyc-token', {
      method: 'GET',
      headers: {
        'Content-Type': 'application/json',
      }
    });
    const data = await response.json();
    console.log("data", data);
  }

  function starOnboarding() {
    getAuthToken();
    const accessToken =
      "Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJhcHBJZCI6ImN0NHdmZCIsImhhc2giOiJmYTg1ODY1NTg4MjliYzEwMDgzYTY0OTRjM2Q5NGM1MWY1NWM2YjM0ZDJmY2MyZmZjZmU3NDY4Y2EwNzk2MTBiIiwidHJhbnNhY3Rpb25JZCI6IlRYXzE3NTYyNzU5Mzc2ODMiLCJ3b3JrZmxvd0lkIjoid29ya2Zsb3dfZWt5YyIsImlhdCI6MTc1NjQ1ODc2NSwiZXhwIjoxNzU2NTAxOTY1LCJqdGkiOiI0NjhkYWEzOC1jZjhjLTQzZWEtOTQ1Yi1mZmFiZjljZjE1ZGYifQ.nr-oFyMmWaigr9jStyl6-u2If_8RJUJqI_rYn7xQUzf5p1ARG3wn1GnVnBV514gtoQ_Ev7o2YZMeCzO03SyKI9YdNaD0vsGth_AEHToUzhe_GOXopN18DSVZXVuOMLjtmJX5WBS-SBO_ml0JgbZ3DKEXwdNa5D5gkqlELEhDBdU";

    const hyperKycConfig = new HyperKycConfig(
      accessToken,
      true
    );

    const languageToBeUsed = "vi";
    hyperKycConfig.setLanguageUsed(languageToBeUsed);

    HyperKYCModule.launch(hyperKycConfig, handler);
  }
  const handler = (HyperKycResult) => {
    textBox.value = JSON.stringify(HyperKycResult, null, 2);
    switch (HyperKycResult.status) {
      // ----Incomplete workflow-----
      case "user_cancelled":
        // <<Insert code block 1>>
        break;
      case "error":
        // <<Insert code block 2>>
        break;

      // ----Complete workflow-----

      case "auto_approved":
        // <<Insert code block 3>>
        break;
      case "auto_declined":
        // <<Insert code block 4>>
        break;
      case "needs_review":
        // <<Insert code block 5>>
        break;
    }
  };
</script>

</html>