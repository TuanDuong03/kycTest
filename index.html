<!DOCTYPE html>
<html lang="en">

<head>
  <script
    src="https://hv-camera-web-sg.s3-ap-southeast-1.amazonaws.com/hyperverge-web-sdk@9.15.2/src/sdk.min.js"></script>
</head>

<body>
  <div style="position: fixed; top: 10%; left: 37%">
    <div style="text-align: center">
      <button type="button" onclick="starOnboarding();">
        Start Onboarding
      </button>
    </div>
    <textarea type="text" id="myTextBox" rows="50" cols="50" style="resize: both; margin-top: 1rem">
      </textarea>
  </div>
</body>
<script>
  const textBox = document.getElementById("myTextBox");

  const getAuthToken = async () => {
    const response = await fetch('https://679e8d0dc2aa.ngrok-free.app/kyc/generate-kyc-token', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({})
    });
    const data = await response.json();
    return data.result.authToken;
  }

  async function starOnboarding() {
    const authToken = await getAuthToken();
    const accessToken = authToken;

    const hyperKycConfig = new HyperKycConfig(
      accessToken,
      true
    );

    const languageToBeUsed = "vi";
    hyperKycConfig.setLanguageUsed(languageToBeUsed);

    HyperKYCModule.launch(hyperKycConfig, handler);
  }
  const handler = (HyperKycResult) => {
    textBox.value = JSON.stringify(HyperKycResult, null, 2);
    switch (HyperKycResult.status) {
      // ----Incomplete workflow-----
      case "user_cancelled":
        // <<Insert code block 1>>
        break;
      case "error":
        // <<Insert code block 2>>
        break;

      // ----Complete workflow-----

      case "auto_approved":
        // <<Insert code block 3>>
        break;
      case "auto_declined":
        // <<Insert code block 4>>
        break;
      case "needs_review":
        // <<Insert code block 5>>
        break;
    }
  };
</script>

</html>