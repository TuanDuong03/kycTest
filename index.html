<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HyperVerge KYC Blockchain Demo</title>
    <script
        src="https://hv-camera-web-sg.s3-ap-southeast-1.amazonaws.com/hyperverge-web-sdk@9.15.2/src/sdk.min.js"></script>
    <style>
        @import "style.css";
    </style>
</head>

<body>
    <h2>HyperVerge KYC Blockchain Demo</h2>
    <div>
        <button type="button" onclick="startOnboarding();">
            Start KYC Onboarding
        </button>
    </div>
    <div id="result">KYC Result will appear here...</div>
    <script>
        // Mock blockchain ledger for demo purpose

        // async function getAccessToken() {
        //     const response = await fetch('https://auth.hyperverge.co/login', {
        //         method: 'POST',
        //         headers: {
        //             'Content-Type': 'application/json',
        //         },
        //         body: JSON.stringify({  
        //             appId: 'ct4wfd',
        //             appKey: '424tdohz6d3hu7fj0u9l',
        //             WorkflowID: 'workflow_ekyc',
        //             TransactionID: 'TX_1756365267835',
        //             expiry: 4800,
        //         }),
        //     });
        //     const data = await response.json();
        //     const token = data.result.token;
        //     const formatedToken = token.replace("Bearer ", "");
        //     console.log("formatedToken", formatedToken);
        //     return formatedToken;
        // }



        async function startOnboarding() {
            // const accessToken = "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJhcHBJZCI6ImN0NHdmZCIsImhhc2giOiJmYTg1ODY1NTg4MjliYzEwMDgzYTY0OTRjM2Q5NGM1MWY1NWM2YjM0ZDJmY2MyZmZjZmU3NDY4Y2EwNzk2MTBiIiwidHJhbnNhY3Rpb25JZCI6IlRYXzE3NTYyNzU5Mzc2ODMiLCJ3b3JrZmxvd0lkIjoid29ya2Zsb3dfZWt5YyIsImlhdCI6MTc1NjQ1ODc2NSwiZXhwIjoxNzU2NTAxOTY1LCJqdGkiOiI0NjhkYWEzOC1jZjhjLTQzZWEtOTQ1Yi1mZmFiZjljZjE1ZGYifQ.nr-oFyMmWaigr9jStyl6-u2If_8RJUJqI_rYn7xQUzf5p1ARG3wn1GnVnBV514gtoQ_Ev7o2YZMeCzO03SyKI9YdNaD0vsGth_AEHToUzhe_GOXopN18DSVZXVuOMLjtmJX5WBS-SBO_ml0JgbZ3DKEXwdNa5D5gkqlELEhDBdU";
            // const hyperKycConfig = new HyperKycConfig(
            //     accessToken,
            //     true
            // );
            // console.log("hyperKycConfig", hyperKycConfig);
            // HyperKYCModule.launch(hyperKycConfig, handler);
            const accessToken =
                "Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJhcHBJZCI6ImN0NHdmZCIsImhhc2giOiJmYTg1ODY1NTg4MjliYzEwMDgzYTY0OTRjM2Q5NGM1MWY1NWM2YjM0ZDJmY2MyZmZjZmU3NDY4Y2EwNzk2MTBiIiwidHJhbnNhY3Rpb25JZCI6IndlYi1zZGstdGVzdC0wMiIsIndvcmtmbG93SWQiOiJ3b3JrZmxvd19la3ljIiwiaWF0IjoxNzU2NDU3Nzg5LCJleHAiOjE3NTY0NjEzODksImp0aSI6Ijk5NWMzNDViLTkxZTEtNDA4NC05ZDNmLWExOWZkNjk3ZmVkMiJ9.PqJL1FQYWP0l5pVGbbjD06f9gSBPDRvUGh7T3rdA1WcCdshnTFw6LfXUjfENbrOUlme5Kr43T2Q49V9ZIcev1Yje8-NcA3n6__nnKZqBYoGNc2JTWdeg8oAxMofF6kBzuZ1IsRVTxtIaWLcRekHxqa1iiR1k_mRePoEH8v7GjpI";

            const hyperKycConfig = new HyperKycConfig(
                accessToken
            );

            const languageToBeUsed = "en";
            hyperKycConfig.setLanguageUsed(languageToBeUsed);

            HyperKYCModule.launch(hyperKycConfig, handler);
        }

        const handler = (HyperKycResult) => {
            if (HyperKycResult.Cancelled) {
                // user cancelled
                console.log(HyperKycResult.Cancelled);
            } else if (HyperKycResult.Failure) {
                // failure
                console.log(HyperKycResult.Failure);
            } else if (HyperKycResult.Success) {
                // success
                console.log(HyperKycResult.Success);
            }
        }
    </script>
</body>

</html>